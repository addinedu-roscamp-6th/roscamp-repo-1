<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}guardian admin{% endblock %}</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/theme.css') }}" rel="stylesheet">
</head>
<body class="layout">

  <!-- Top Bar -->
  <header class="topbar border-bottom bg-white">
    <div class="d-flex align-items-center justify-content-between px-3 h-100">
      <div class="d-flex align-items-center gap-2">
        <button class="btn btn-sm btn-outline-secondary d-lg-none" id="sidebarToggle" aria-label="Toggle sidebar">
          <i class="bi bi-list"></i>
        </button>
        <a class="navbar-brand brand-accent m-0" href="/">guardian admin</a>
      </div>
      <div class="d-flex align-items-center gap-2">
        <div class="d-none d-md-flex align-items-center gap-2">
          <input class="form-control form-control-sm w-250" placeholder="검색 (이름/장비/로그)">
          <button class="btn btn-sm btn-outline-secondary"><i class="bi bi-search"></i></button>
        </div>
        <button class="btn btn-sm btn-outline-secondary" title="알림"><i class="bi bi-bell"></i></button>
        <div class="dropdown">
          <button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
            <i class="bi bi-person-circle me-1"></i> 관리자
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="/profile"><i class="bi bi-person"></i> 프로필</a></li>
            <li><a class="dropdown-item" href="/settings"><i class="bi bi-gear"></i> 설정</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#"><i class="bi bi-box-arrow-right"></i> 로그아웃</a></li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <div class="workspace">
    <!-- Sidebar -->
    <aside class="sidebar border-end" id="sidebar">
      <nav class="px-2 py-3">

        <div class="text-uppercase small text-muted px-2 mb-2">Overview</div>
        <a href="/" class="nav-item {{ 'active' if request.path=='/' else '' }}">
          <i class="bi bi-speedometer2"></i><span>대시보드</span>
        </a>

        <div class="text-uppercase small text-muted px-2 mt-3 mb-2">Security</div>
        <a href="{{ url_for('faces_list') }}" class="nav-item {{ 'active' if request.path.startswith('/faces') else '' }}">
          <i class="bi bi-people"></i><span>Faces(등록 인원)</span>
        </a>
        <a href="/incidents" class="nav-item {{ 'active' if request.path.startswith('/incidents') else '' }}">
          <i class="bi bi-activity"></i><span>보안 이벤트</span>
        </a>
        <a href="/alerts" class="nav-item {{ 'active' if request.path.startswith('/alerts') else '' }}">
          <i class="bi bi-shield-exclamation"></i><span>알림/경보</span>
        </a>
        <a href="/access" class="nav-item {{ 'active' if request.path.startswith('/access') else '' }}">
          <i class="bi bi-door-open"></i><span>출입 기록</span>
        </a>
        <a href="/logs" class="nav-item {{ 'active' if request.path.startswith('/logs') else '' }}">
          <i class="bi bi-card-text"></i><span>시스템 로그</span>
        </a>

        <div class="text-uppercase small text-muted px-2 mt-3 mb-2">Devices</div>
        <a href="/cameras" class="nav-item {{ 'active' if request.path.startswith('/cameras') else '' }}">
          <i class="bi bi-camera-video"></i><span>카메라</span>
        </a>
        <a href="/devices" class="nav-item {{ 'active' if request.path.startswith('/devices') else '' }}">
          <i class="bi bi-router"></i><span>로봇/장비</span>
        </a>
        <a href="/patrols" class="nav-item {{ 'active' if request.path.startswith('/patrols') else '' }}">
          <i class="bi bi-map"></i><span>순찰 경로/스케줄</span>
        </a>
        <a href="/maps" class="nav-item {{ 'active' if request.path.startswith('/maps') else '' }}">
          <i class="bi bi-map-fill"></i><span>지도/존 관리</span>
        </a>

        <div class="text-uppercase small text-muted px-2 mt-3 mb-2">Admin</div>
        <a href="/users" class="nav-item {{ 'active' if request.path.startswith('/users') else '' }}">
          <i class="bi bi-people-fill"></i><span>사용자/권한</span>
        </a>
        <a href="/tasks" class="nav-item {{ 'active' if request.path.startswith('/tasks') else '' }}">
          <i class="bi bi-list-check"></i><span>작업/요청</span>
        </a>
        <a href="/settings" class="nav-item {{ 'active' if request.path.startswith('/settings') else '' }}">
          <i class="bi bi-gear"></i><span>환경설정</span>
        </a>
      </nav>
    </aside>

    <!-- Content -->
    <main class="content">
      <div class="container-fluid py-3">
        {% block content %}{% endblock %}
      </div>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.getElementById('sidebarToggle')?.addEventListener('click', () => {
      document.getElementById('sidebar')?.classList.toggle('open');
    });
  </script>
</body>
</html>
